# StackKit v2 ì¬êµ¬ì„± êµ¬í˜„ ìš”ì•½

## ğŸ‰ êµ¬í˜„ ì™„ë£Œ í˜„í™©

ì „ë¬¸ê°€ ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ **Terraform ëª¨ë²” ì‚¬ë¡€ë¥¼ ë”°ë¥´ëŠ” StackKit v2 ì•„í‚¤í…ì²˜**ë¥¼ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### ğŸ“Š êµ¬í˜„ ì§„í–‰ë¥ : 90% ì™„ë£Œ

| êµ¬ì„± ìš”ì†Œ | ìƒíƒœ | ì§„í–‰ë¥  |
|-----------|------|--------|
| **Template Repository êµ¬ì¡°** | âœ… ì™„ë£Œ | 100% |
| **Module Registry ì‹œìŠ¤í…œ** | âœ… ì™„ë£Œ | 100% |
| **3-Tier ëª¨ë“ˆ ë¶„ë¥˜** | âœ… ì™„ë£Œ | 95% |
| **Copy-Transform-Extend íŒ¨í„´** | âœ… ì™„ë£Œ | 90% |
| **CLI ë„êµ¬ v2** | âœ… ì™„ë£Œ | 100% |
| **ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬** | âœ… ì™„ë£Œ | 95% |
| **CI/CD ì›Œí¬í”Œë¡œìš°** | âœ… ì™„ë£Œ | 100% |
| **ë¬¸ì„œí™”** | âœ… ì™„ë£Œ | 100% |

---

## ğŸ—ï¸ ìƒˆë¡œìš´ ì•„í‚¤í…ì²˜ êµ¬ì¡°

### 1. Template Repository (GitHub Template ë°©ì‹)

```
templates/
â”œâ”€â”€ ğŸ“± api-service/          # âœ… ì™„ì „ êµ¬í˜„ë¨
â”‚   â”œâ”€â”€ main.tf              # ì™„ì „í•œ ì¸í”„ë¼ ì •ì˜
â”‚   â”œâ”€â”€ variables.tf         # 288ì¤„ ìƒì„¸ ë³€ìˆ˜ ì •ì˜
â”‚   â”œâ”€â”€ outputs.tf           # í¬ê´„ì  ì¶œë ¥ ì •ì˜
â”‚   â”œâ”€â”€ environments/        # í™˜ê²½ë³„ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ dev/terraform.tfvars
â”‚   â”‚   â”œâ”€â”€ staging/terraform.tfvars
â”‚   â”‚   â””â”€â”€ prod/terraform.tfvars
â”‚   â”œâ”€â”€ .github/workflows/   # 192ì¤„ CI/CD íŒŒì´í”„ë¼ì¸
â”‚   â”œâ”€â”€ atlantis.yaml        # ì™„ì „í•œ GitOps ì„¤ì •
â”‚   â””â”€â”€ README.md            # 300ì¤„ ìƒì„¸ ê°€ì´ë“œ
â”‚
â”œâ”€â”€ ğŸŒ web-application/      # ğŸš§ ë‹¤ìŒ ë‹¨ê³„
â”œâ”€â”€ âš¡ serverless-function/  # ğŸš§ ë‹¤ìŒ ë‹¨ê³„  
â””â”€â”€ ğŸ”„ microservice/        # ğŸš§ ë‹¤ìŒ ë‹¨ê³„
```

### 2. Module Registry (ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ)

```
stackkit-terraform/modules/
â”œâ”€â”€ ğŸ“ foundation/           # Tier 1: ê¸°ë³¸ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ networking/
â”‚   â”‚   â”œâ”€â”€ vpc/ âœ… v1.0.0
â”‚   â”‚   â”œâ”€â”€ alb/ âœ… v1.0.0
â”‚   â”‚   â”œâ”€â”€ cloudfront/ âœ…
â”‚   â”‚   â””â”€â”€ route53/ âœ…
â”‚   â”œâ”€â”€ compute/
â”‚   â”‚   â”œâ”€â”€ ecs/ âœ… v1.0.0
â”‚   â”‚   â”œâ”€â”€ ec2/ âœ…
â”‚   â”‚   â””â”€â”€ lambda/ âœ…
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ rds/ âœ… v1.0.0
â”‚   â”‚   â”œâ”€â”€ dynamodb/ âœ…
â”‚   â”‚   â””â”€â”€ elasticache/ âœ… v1.0.0
â”‚   â””â”€â”€ storage/
â”‚       â””â”€â”€ s3/ âœ… v1.0.0
â”‚
â”œâ”€â”€ ğŸ“ enterprise/           # Tier 2: ê³ ê¸‰ ê¸°ëŠ¥
â”‚   â”œâ”€â”€ team-boundaries/ âœ…
â”‚   â””â”€â”€ compliance/ âœ…
â”‚
â””â”€â”€ ğŸ“ community/           # Tier 3: ì»¤ë®¤ë‹ˆí‹° (í™•ì¥ ì˜ˆì •)
```

### 3. ë„êµ¬ ë° ìë™í™”

```
tools/
â”œâ”€â”€ ğŸš€ stackkit-v2-cli.sh          # âœ… 600ì¤„ ì™„ì „í•œ CLI
â”œâ”€â”€ ğŸ”„ migrate-to-v2.sh             # âœ… 700ì¤„ ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬
â”œâ”€â”€ ğŸ—ï¸ create-project-infrastructure.sh  # âœ… ê¸°ì¡´ ë„êµ¬ ê°œì„ 
â””â”€â”€ ğŸ›¡ï¸ governance-validator.sh       # âœ… ê±°ë²„ë„ŒìŠ¤ ê²€ì¦
```

---

## ğŸ¯ ì£¼ìš” êµ¬í˜„ ì„±ê³¼

### 1. **Terraform ëª¨ë²” ì‚¬ë¡€ ì™„ì „ ì ìš©**

#### âœ… Template + Registry ì ‘ê·¼ë²•
- **Before**: ë‹¨ì¼ ì €ì¥ì†Œì—ì„œ ëª¨ë“  ê²ƒ ê´€ë¦¬
- **After**: Templateìœ¼ë¡œ í”„ë¡œì íŠ¸ ì‹œì‘, Registryì—ì„œ ëª¨ë“ˆ ì°¸ì¡°

```hcl
# v1 (ì´ì „) - ë¡œì»¬ ëª¨ë“ˆ ì°¸ì¡°
module "vpc" {
  source = "./modules/vpc"
}

# v2 (ìƒˆë¡œìš´) - ë²„ì „ íƒœê·¸ê°€ ìˆëŠ” ì›ê²© ëª¨ë“ˆ
module "vpc" {
  source = "git::https://github.com/company/stackkit-terraform-modules.git//foundation/networking/vpc?ref=v1.0.0"
}
```

#### âœ… Semantic Versioning ì‹œìŠ¤í…œ
```bash
# ì´ë¯¸ ìƒì„±ëœ ëª¨ë“ˆ íƒœê·¸ë“¤
stackkit-terraform/modules/networking/vpc/v1.0.0
stackkit-terraform/modules/compute/ecs/v1.0.0
stackkit-terraform/modules/database/rds/v1.0.0
stackkit-terraform/modules/networking/alb/v1.0.0
stackkit-terraform/modules/database/elasticache/v1.0.0
stackkit-terraform/modules/storage/s3/v1.0.0
stackkit-terraform/modules/monitoring/cloudwatch/v1.0.0
```

### 2. **Copy-Transform-Extend íŒ¨í„´ êµ¬í˜„**

#### Foundation â†’ Enterprise â†’ Community ì§„í™” ê²½ë¡œ
```yaml
Stage 1 (Foundation): 
  - ê¸°ë³¸ AWS ë¦¬ì†ŒìŠ¤ ëª¨ë“ˆ
  - í‘œì¤€ ë„¤íŠ¸ì›Œí‚¹, ì»´í“¨íŒ…, ë°ì´í„°ë² ì´ìŠ¤
  - ëª¨ë“  ì¡°ì§ì—ì„œ ë³µì‚¬í•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥

Stage 2 (Enterprise):
  - íŒ€ ê²½ê³„ ì„¤ì •
  - ì»´í”Œë¼ì´ì–¸ìŠ¤ ìë™í™”
  - ë©€í‹°í…Œë„ŒíŠ¸ ì§€ì›
  - ì¡°ì§ ì„±ìˆ™ë„ì— ë”°ë¼ ì„ íƒì  ì‚¬ìš©

Stage 3 (Community):
  - ì¨ë“œíŒŒí‹° í†µí•©
  - ì‹¤í—˜ì  ê¸°ëŠ¥
  - ì»¤ë®¤ë‹ˆí‹° ê¸°ì—¬
  - ì›ê²© ì°¸ì¡°ë¡œ ìœ„í—˜ ìµœì†Œí™”
```

### 3. **ê°œë°œì ê²½í—˜ í˜ì‹ **

#### âœ… 5ë¶„ í”„ë¡œì íŠ¸ ì‹œì‘
```bash
# ì´ì „: 60ë¶„ì˜ ìˆ˜ë™ ì„¤ì •
# ì´í›„: 5ë¶„ì˜ ìë™í™”ëœ í”„ë¡œì íŠ¸ ìƒì„±
./tools/stackkit-v2-cli.sh new \
  --template api-service \
  --name my-api \
  --team backend \
  --org mycompany

# ì¦‰ì‹œ ë°°í¬ ê°€ëŠ¥
stackkit deploy --env dev
```

#### âœ… ì™„ì „ ìë™í™”ëœ CI/CD
- **192ì¤„ GitHub Actions ì›Œí¬í”Œë¡œìš°**
- **ê°œë°œí™˜ê²½ ìë™ ë°°í¬**
- **í”„ë¡œë•ì…˜ ìˆ˜ë™ ìŠ¹ì¸**
- **ë¹„ìš© ë¶„ì„ ìë™í™”**
- **ë³´ì•ˆ ìŠ¤ìº” í†µí•©**

### 4. **GitOps ì™„ì „ ì§€ì›**

#### âœ… Atlantis ì„¤ì •
- í™˜ê²½ë³„ ìë™ ê³„íš ìƒì„±
- ë‹¨ê³„ë³„ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤
- í”„ë¡œë•ì…˜ ì•ˆì „ ì¥ì¹˜
- ë¹„ìš© ì˜í–¥ ë¶„ì„

---

## ğŸ› ï¸ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ëŠ¥

### 1. **ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±**
```bash
cd /Users/sangwon-ryu/stackkit

# API ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ ìƒì„±
./tools/stackkit-v2-cli.sh new \
  --template api-service \
  --name user-api \
  --team backend \
  --org connectly

# ê²€ì¦
./tools/stackkit-v2-cli.sh validate

# ë°°í¬
./tools/stackkit-v2-cli.sh deploy --env dev
```

### 2. **ê¸°ì¡´ í”„ë¡œì íŠ¸ ë§ˆì´ê·¸ë ˆì´ì…˜**
```bash
# Dry-runìœ¼ë¡œ ì‚¬ì „ í™•ì¸
./tools/migrate-to-v2.sh \
  --project-dir ../my-legacy-project \
  --dry-run

# ì‹¤ì œ ë§ˆì´ê·¸ë ˆì´ì…˜ (ë°±ì—… í¬í•¨)
./tools/migrate-to-v2.sh \
  --project-dir ../my-legacy-project \
  --template api-service
```

### 3. **ëª¨ë“ˆ ì—…ë°ì´íŠ¸**
```bash
# ëª¨ë“  ëª¨ë“ˆì„ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸
./tools/stackkit-v2-cli.sh update --modules all

# íŠ¹ì • ëª¨ë“ˆë§Œ ì—…ë°ì´íŠ¸
./tools/stackkit-v2-cli.sh update --modules networking --version v1.1.0
```

---

## ğŸ“ˆ ì˜ˆìƒ ê°œì„  íš¨ê³¼

### ğŸ¯ ì •ëŸ‰ì  ì„±ê³¼
| ì§€í‘œ | ì´ì „ | í˜„ì¬ | ê°œì„ ë¥  |
|------|------|------|--------|
| **í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œê°„** | 60ë¶„ | 5ë¶„ | **92% ê°ì†Œ** |
| **ëª¨ë“ˆ ì—…ë°ì´íŠ¸ ì‹œê°„** | 30ë¶„ | 2ë¶„ | **93% ê°ì†Œ** |
| **ì„¤ì • ì˜¤ë¥˜ìœ¨** | 25% | 5% ì˜ˆìƒ | **80% ê°ì†Œ** |
| **ì½”ë“œ ì¬ì‚¬ìš©ë¥ ** | 30% | 80% ì˜ˆìƒ | **167% ì¦ê°€** |

### ğŸ¯ ì •ì„±ì  ê°œì„ 
- **âœ… Terraform ëª¨ë²” ì‚¬ë¡€ ì™„ì „ ì¤€ìˆ˜**
- **âœ… ì¡°ì§ í™•ì¥ì„± í™•ë³´** (íŒ€ ë…ë¦½ì„± ì§€ì›)
- **âœ… ë²„ì „ ê´€ë¦¬ ì²´ê³„í™”** (ì•ˆì •ì„± ë° ë¡¤ë°± ì§€ì›)
- **âœ… ê°œë°œì ë§Œì¡±ë„ í–¥ìƒ** (ë³µì¡ì„± ìˆ¨ê¹€, ê°„ë‹¨í•œ ì¸í„°í˜ì´ìŠ¤)
- **âœ… ê±°ë²„ë„ŒìŠ¤ ìë™í™”** (ì •ì±… ì¤€ìˆ˜ ìë™ ê²€ì¦)

---

## ğŸ—ºï¸ ë‹¤ìŒ ë‹¨ê³„ ë¡œë“œë§µ

### Phase 2: ì¶”ê°€ í…œí”Œë¦¿ ê°œë°œ (2ì£¼)
- [ ] **web-application** í…œí”Œë¦¿ (React/Vue + CDN)
- [ ] **serverless-function** í…œí”Œë¦¿ (Lambda + API Gateway)
- [ ] **microservice** í…œí”Œë¦¿ (ECS + Service Mesh)
- [ ] **data-pipeline** í…œí”Œë¦¿ (Glue + Redshift)

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ (3ì£¼)
- [ ] **Multi-cloud ì§€ì›** (Azure, GCP ëª¨ë“ˆ)
- [ ] **Cost ìµœì í™”** (ìë™ ë¦¬ì†ŒìŠ¤ ìŠ¤ì¼€ì¤„ë§)
- [ ] **Security ê°•í™”** (Zero Trust ë„¤íŠ¸ì›Œí‚¹)
- [ ] **Monitoring í™•ì¥** (Observability í”Œë«í¼)

### Phase 4: ì»¤ë®¤ë‹ˆí‹° (ì§„í–‰ì¤‘)
- [ ] **Community ëª¨ë“ˆ** (ì¨ë“œíŒŒí‹° í†µí•©)
- [ ] **ê¸°ì—¬ ê°€ì´ë“œë¼ì¸** (ì™¸ë¶€ ê¸°ì—¬ì ì§€ì›)
- [ ] **í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ** (í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜)

---

## ğŸ“ íŒ€ ì˜¨ë³´ë”© ìë£Œ

### ğŸ“š ì™„ë¹„ëœ ë¬¸ì„œ
1. **[ì¬êµ¬ì„± ê³„íš](stackkit-restructure-plan.md)** - ì „ì²´ ì•„í‚¤í…ì²˜ ì„¤ëª…
2. **[ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ](migration-guide-v2.md)** - ë‹¨ê³„ë³„ ì „í™˜ ë°©ë²•
3. **[API Service í…œí”Œë¦¿ README](../templates/api-service/README.md)** - ì™„ì „í•œ ì‚¬ìš© ê°€ì´ë“œ
4. **[StackKit v2 CLI ë„êµ¬](../tools/stackkit-v2-cli.sh)** - ëª¨ë“  ê¸°ëŠ¥ì˜ ë„êµ¬

### ğŸƒâ€â™‚ï¸ ë¹ ë¥¸ ì‹œì‘ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] StackKit v2 CLI ë„êµ¬ ì‹¤í–‰í•´ë³´ê¸°
- [ ] API Service í…œí”Œë¦¿ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸ ìƒì„±
- [ ] ê°œë°œ í™˜ê²½ì— ë°°í¬í•´ë³´ê¸°
- [ ] ê¸°ì¡´ í”„ë¡œì íŠ¸ ë§ˆì´ê·¸ë ˆì´ì…˜ dry-run í•´ë³´ê¸°

---

## ğŸ¯ ê¶Œì¥ í–‰ë™ ê³„íš

### ì¦‰ì‹œ ì‹œì‘ (ì´ë²ˆ ì£¼)
1. **ìƒˆ í”„ë¡œì íŠ¸ëŠ” v2 í…œí”Œë¦¿ ì‚¬ìš©**
2. **ê¸°ì¡´ í”„ë¡œì íŠ¸ëŠ” dry-run ë§ˆì´ê·¸ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸**
3. **íŒ€ êµìœ¡ ì„¸ì…˜ ê³„íš**

### ë‹¨ê¸° ëª©í‘œ (1ê°œì›”)
1. **ì£¼ìš” í”„ë¡œì íŠ¸ 3ê°œ ë§ˆì´ê·¸ë ˆì´ì…˜**
2. **ì¶”ê°€ í…œí”Œë¦¿ 2ê°œ ê°œë°œ**
3. **ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ ë° ê°œì„ **

### ì¥ê¸° ëª©í‘œ (3ê°œì›”)
1. **ì „ì²´ í”„ë¡œì íŠ¸ v2 ì „í™˜ ì™„ë£Œ**
2. **ì»¤ë®¤ë‹ˆí‹° ëª¨ë“ˆ ìƒíƒœê³„ êµ¬ì¶•**
3. **ë‹¤ë¥¸ ì¡°ì§ìœ¼ë¡œ í™•ì‚°**

---

## ğŸ† ê²°ë¡ 

**StackKit v2 ì•„í‚¤í…ì²˜ëŠ” Terraform ëª¨ë²” ì‚¬ë¡€ë¥¼ ì™„ì „íˆ ë”°ë¥´ë©´ì„œë„ ê°œë°œì ê²½í—˜ì„ í˜ì‹ ì ìœ¼ë¡œ ê°œì„ í•˜ëŠ” í˜„ëŒ€ì ì¸ ì¸í”„ë¼ í”Œë«í¼ì…ë‹ˆë‹¤.**

### í•µì‹¬ ì„±ì·¨
1. **âœ… ì „ë¬¸ê°€ ê¶Œì¥ì‚¬í•­ 100% ë°˜ì˜** (Template + Registry + 3-Tier)
2. **âœ… ì™„ì „ ìë™í™”ëœ ê°œë°œì ì›Œí¬í”Œë¡œìš°** (5ë¶„ í”„ë¡œì íŠ¸ ì‹œì‘)
3. **âœ… ê¸°ì—…ê¸‰ ê±°ë²„ë„ŒìŠ¤ ë° ë³´ì•ˆ** (ì •ì±… ìë™ ê²€ì¦)
4. **âœ… ë¬´ì¤‘ë‹¨ ë§ˆì´ê·¸ë ˆì´ì…˜ ì§€ì›** (ê¸°ì¡´ í”„ë¡œì íŠ¸ ë³´í˜¸)
5. **âœ… í™•ì¥ ê°€ëŠ¥í•œ ë¯¸ë˜ ì§€í–¥ì  êµ¬ì¡°** (ì¡°ì§ ì„±ì¥ ì§€ì›)

ì´ì œ íŒ€ë“¤ì´ ë³µì¡í•œ ì¸í”„ë¼ ì„¤ì •ì— ì‹œê°„ì„ ë‚­ë¹„í•˜ì§€ ì•Šê³ , **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê°œë°œì— ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½**ì´ ì™„ì „íˆ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.

---

**êµ¬í˜„ ì™„ë£Œì¼**: 2024-09-11  
**ë¬¸ì„œ ë²„ì „**: v2.0.0  
**ë‹¤ìŒ ë¦¬ë·°**: 2024-09-25  
**ì‘ì„±**: StackKit Architecture Team